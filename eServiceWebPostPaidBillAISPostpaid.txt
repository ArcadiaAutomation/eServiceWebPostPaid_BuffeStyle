*** Settings ***
Resource          Resource/PageKeywords/eServiceWebPostPaidBillAISPostpaid.txt
Resource          Resource/Localized/${ar_LANG}/eServiceWebPostPaidBillAISPostpaidMessage.txt
Resource          Resource/PageKeywords/eServiceWebPostPaidLogin.txt
Resource          ../LocalConfig.txt

*** Test Cases ***
[S05-001]eServiceWeb-PO-BillAISPostpaid-PayWithMASTERcard
    Open Browser    ${eServiceURL}    ${ar_BROWSER}    remote_url=${lo_IPSelenium}
    Maximize Browser Window
    Select Frame    ${fraMainIframe}
    Select Language    ${btnLanguage}
    Login    ${lo_RUN_3PO_1_IPAppium}    ${lo_RUN_3PO_1}    ${lo_RUN_3PO_1_Platfrom_Name}    ${lo_RUN_3PO_1_Platfrom_Version}    ${lo_RUN_3PO_1_Number}
    SelectMenu    Payment/Topup    BillAISPostpaid
    sleep    5
    Select Payment Type    Credit Card
    Select Card Name    MASTER
    Click Web Element    ${btnOK}
    sleep    5
    Select Window    url=${urlIpayBangkokBank}
    ${ipay}    Get Location
    Close All Browsers

TestOpenAppMobile
    ${driver1}    AISAppium Open Application    http://10.239.223.84:4723/wd/hub    platformName=Android    platformVersion=5.1.1    deviceName= any    appPackage=com.ais.mimo.eservice
    ...    appActivity=com.nextzy.allforone.view.DummyActivity    appWaitActivity=com.nextzy.allforone.view.menu.MenuActivity    udid=9201176364de23eb
    ${driver2}    AISAppium Open Application    http://10.239.223.84:4724/wd/hub    platformName=Android    platformVersion=5.1.1    deviceName= any    appPackage=com.calea.echo
    ...    appActivity=com.calea.echo.MainActivity    udid=0123456789ABCDEF
    log    ${driver1}
    log    ${driver2}
    AISAppium Click Element    name=AIS
    AISAppium Set Network Connection Status    1    ${driver2}

[S01-001]eServiceMobile-PO-Login
    ${App1}    AISAppium Open Application    http://10.239.223.84:4724/wd/hub    platformName=Android    platformVersion=5.1.1    deviceName= any    appPackage=com.ais.mimo.eservice
    ...    appActivity=com.nextzy.allforone.view.DummyActivity    appWaitActivity=com.nextzy.allforone.view.menu.MenuActivity    udid=0123456789ABCDEF
    ${App2}    AISAppium Open Application    http://10.239.223.84:4723/wd/hub    platformName=Android    platformVersion=5.1.1    deviceName= any    appPackage=com.calea.echo
    ...    appActivity=com.calea.echo.MainActivity    udid=4d00643b4828a0df
    sleep    5
    AISAppium Click Element    xpath=//android.widget.ImageView[@content-desc="eService"]    ${App1}
    sleep    5
    Comment    Mobile Set Network Connection Status    6    ${App1}
    AISAppium Input Text    xpath=//*[@resource-id="com.ais.mimo.eservice:id/edt_mobile_number"]    0613851273    ${App1}
    AISAppium Hide Keyboard    ${App1}
    sleep    5
    AISAppium Click Element    xpath=//*[@resource-id="com.ais.mimo.eservice:id/btn_submit_mobile_number"]    ${App1}
    sleep    5
    AISAppium Click Element    name=AIS    ${App2}
    sleep    5
    @{SMS}    AISAppium Get Elements Attribute    xpath=//*[@resource-id="com.calea.echo:id/imm_text"]    text    ${App2}
    Log    @{SMS}[0]
    ${OTP}    Get OT Pin SMS    ${SMS}[0]
    AISAppium Input Text    xpath=//*[@resource-id="com.ais.mimo.eservice:id/edt_otp_number"]    ${OTP}    ${App1}
    AISAppium Hide Keyboard    ${App1}
    AISAppium Click Element    xpath=//*[@resource-id="com.ais.mimo.eservice:id/btn_submit_password"]    ${App1}

TestInfo
    ${App1}    AISAppium Open Application    http://10.239.223.84:4724/wd/hub    platformName=Android    platformVersion=5.1.1    deviceName= any    appPackage=com.ais.mimo.eservice
    ...    appActivity=com.nextzy.allforone.view.DummyActivity    appWaitActivity=com.nextzy.allforone.view.menu.MenuActivity    udid=0123456789ABCDEF
    ${App2}    AISAppium Open Application    http://10.239.223.84:4723/wd/hub    platformName=Android    platformVersion=5.1.1    deviceName= any    appPackage=com.calea.echo
    ...    appActivity=com.calea.echo.MainActivity    udid=4d00643b4828a0df
    sleep    5
    Log    ${App1.driver}
    Log    ${App2.index}
    AISAppium Click Element    name=AIS
    AISAppium Click Element    xpath=//android.widget.ImageView[@content-desc="eService"]    ${App1}
