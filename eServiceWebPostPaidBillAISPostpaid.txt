*** Settings ***
Resource          Resource/PageKeywords/eServiceWebPostPaidBillAISPostpaid.txt
Resource          Resource/Localized/${ar_LANG}/eServiceWebPostPaidBillAISPostpaidMessage.txt
Resource          Resource/PageKeywords/eServiceWebPostPaidLogin.txt
Resource          ../LocalConfig.txt
Library           Library/Mobile/Android/AtlasAppium.py

*** Test Cases ***
[S05-001]eServiceWeb-PO-BillAISPostpaid-PayWithMASTERcard
    Open Browser    ${eServiceURL}    ${ar_BROWSER}
    Maximize Browser Window
    Select Frame    ${MainIframe}
    Select Language    ${Language}
    Login    ${lo_RUN_3PO_1_Number}    ${lo_RUN_3PO_1_IPAppium}    ${lo_RUN_3PO_1}
    Select Menu    Payment/Topup    BillAISPostpaid
    sleep    5
    Select Payment Type    Credit Card
    Select Card Name    MASTER
    Click Web Element    ${btnOK}
    sleep    5
    Select Window    url=${urlIpayBangkokBank}
    ${ipay}    Get Location
    Close All Browsers

TestOpenAppMobile
    ${driver1}    Mobile Open Application    http://10.239.123.129:4723/wd/hub    platformName=Android    platformVersion=5.1.1    deviceName= any    appPackage=com.ais.mimo.eservice
    ...    appActivity=com.nextzy.allforone.view.DummyActivity    appWaitActivity=com.nextzy.allforone.view.menu.MenuActivity    udid=3300fa759464132d
    ${driver2}    Mobile Open Application    http://10.239.223.84:4725/wd/hub    platformName=Android    platformVersion=5.1.1    deviceName= any    appPackage=com.calea.echo
    ...    appActivity=com.calea.echo.MainActivity    udid=0123456789ABCDEF
    log    ${driver1}
    log    ${driver2}
    Mobile Click Element    name=AIS
    Mobile Set Network Connection Status    1    ${driver2}

[S01-001]eServiceMobile-PO-Login
    ${App1}    Mobile Open Application    http://10.239.223.84:4725/wd/hub    platformName=Android    platformVersion=5.1.1    deviceName= any    appPackage=com.ais.mimo.eservice
    ...    appActivity=com.nextzy.allforone.view.DummyActivity    appWaitActivity=com.nextzy.allforone.view.menu.MenuActivity    udid=0123456789ABCDEF
    ${App2}    Mobile Open Application    http://10.239.223.84:4723/wd/hub    platformName=Android    platformVersion=5.1.1    deviceName= any    appPackage=com.calea.echo
    ...    appActivity=com.calea.echo.MainActivity    udid=9201176364de23eb
    sleep    5
    Mobile Click Element    xpath=//android.widget.ImageView[@content-desc="eService"]    ${App1}
    sleep    5
    Comment    Mobile Set Network Connection Status    6
    Mobile Input Text    xpath=//*[@resource-id="com.ais.mimo.eservice:id/edt_mobile_number"]    0613851334    ${App1}
    Mobile Hide Keyboard    ${App1}
    sleep    2
    Mobile Click Element    xpath=//*[@resource-id="com.ais.mimo.eservice:id/btn_submit_mobile_number"]    ${App1}
    sleep    5
    Mobile Click Element    name=AIS    ${App2}
    sleep    5
    Comment    ${SMS}    Mobile Get Element Attribute Index    xpath=//*[@resource-id="com.calea.echo:id/imm_text"]    text    1    ${App2}
    Comment    ${OTP}    Get OT Pin SMS    ${SMS}
    Comment    Mobile Input Text    xpath=//*[@resource-id="com.ais.mimo.eservice:id/edt_otp_number"]    ${OTP}    ${App1}
    @{SMS}    Mobile Get Elements Attribute    xpath=//*[@resource-id="com.calea.echo:id/imm_text"]    text    ${App2}
    Log    @{SMS}[0]
    ${OTP}    Get OT Pin SMS    ${SMS}[0]
    Mobile Input Text    xpath=//*[@resource-id="com.ais.mimo.eservice:id/edt_otp_number"]    ${OTP}    ${App1}
    Mobile Hide Keyboard    ${App1}
    Mobile Click Element    xpath=//*[@resource-id="com.ais.mimo.eservice:id/btn_submit_password"]    ${App1}
