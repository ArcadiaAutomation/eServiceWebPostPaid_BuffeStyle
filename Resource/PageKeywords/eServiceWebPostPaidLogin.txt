*** Settings ***
Resource          ../CommonKeywords/RedefineMultipleKeywords.txt
Resource          ../PageRepository/eServiceWebPostPaidLoginRepository.txt
Library           ../../Library/Mobile/Android/GetSMSfromMOOD.py
Library           ../../Library/Mobile/Android/getString.py
Resource          eServiceWebPostPaidCommon.txt
Library           String
Resource          ../MobileKeywords/CommonMobileKeywords/SmsGenericKeywords.txt

*** Keywords ***
Login
    [Arguments]    ${IPAppium}    ${SN}    ${PlatfromName}    ${PlatfromVersion}    ${MobileNumber}
    Input Web Text    ${txtMobileNumber}    ${MobileNumber}
    Click Web Element    ${btnGetOTP}
    Open SMS App    ${IPAppium}    ${PlatfromName}    ${PlatfromVersion}    ${SN}
    Wait SMS    ${PlatfromName}    1    ${lo_GeneralTimeOut}
    sleep    2
    ${messages}=    Read SMS    ${PlatfromName}    AIS    1
    Log    @{messages}[0]
    @{OTP}=    Get Regexp Matches    @{messages}[0]    \\d\\d\\d\\d
    Comment    ${SMSOTP}    GetSMSfromMood    AIS    ${IPAppium}    1    ${SN}
    Comment    ${OTP}    GetOTPinSMS    @{messages}[0]
    Input Web Text    ${txtInputOTP}    @{OTP}[0]
    Click Web Element    ${btnOKOTP}
    sleep    4
    AISAppiumEx.Close Application

Fake OTP
    [Arguments]    ${realOTP}
    ${fakeOTP}    Generate Random String    4    [NUMBERS]
    : FOR    ${INDEX}    IN RANGE    1    ${MAXIMUMLOOP}
    \    Run Keyword If    '${realOTP}'!='${fakeOTP}'    Exit For Loop
    \    ${fakeOTP}    Generate Random String    4    [NUMBERS]
    [Return]    ${fakeOTP}

App
    [Arguments]    ${IPAppium}    ${SN}
    ${SMSOTP}    Get SM Sfrom Mood    AIS3G    ${IPAppium}    1    ${SN}
    ${OTP}    GetOTPinSMS    ${SMSOTP}

Appa
    [Arguments]    ${IPAppium}    ${SN}
    ${SMSOTP}    GetSMSfromMood    AIS    ${IPAppium}    1    ${SN}
    ${OTP}    GetOTPinSMS    ${SMSOTP}
